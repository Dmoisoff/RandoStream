(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e){e.exports={client_id:"bhdp99vbpphliohyse5nf4shno04i0"}},185:function(e,t,n){e.exports=n(427)},190:function(e,t,n){},217:function(e,t){},219:function(e,t){},250:function(e,t){},251:function(e,t){},299:function(e,t){},301:function(e,t){},321:function(e,t){},425:function(e,t,n){},427:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(183),r=n.n(i),o=(n(190),n(32)),c=n(33),l=n(72),u=n(69),h=n(71),g=n(16),m=n(429),d=n(103),p=n(104),f=function(){function e(){Object(o.a)(this,e),this.request=this.request(),this.broadcastInfo=""}return Object(c.a)(e,[{key:"request",value:function(e){var t={uri:"https://api.twitch.tv/kraken/streams/",qs:{limit:"100",stream_type:"live",language:"en"},headers:{"Client-ID":d.client_id,Accept:"application/vnd.twitchtv.v5+json"},json:!0};return e&&(t.qs.cursor=e),t}},{key:"getStreamerInfo",value:function(){var e=this;return console.log("getting streamer"),p(this.request).then(function(t){var n=Math.floor(100*Math.random());return t._total<100&&(n=Math.floor(Math.random()*t._total)),e.broadcastInfo=t.streams[n],t.streams[n]}).catch(function(e){console.log("couldn't make request"),console.log(e)})}},{key:"getURL",value:function(e){return e.channel.url}}]),e}(),v=n(184),b=n.n(v),y=n(103),S=n(104),k=function(){function e(){Object(o.a)(this,e),this.request=this.request(),this.broadcastInfo=[],this.previewImages=[],this.URLS=[],this.imagesAndURLS={},this.getTenImages=this.getTenImages.bind(this),this.getTenURLS=this.getTenURLS.bind(this),this.getTenStreams=this.getTenStreams.bind(this)}return Object(c.a)(e,[{key:"request",value:function(e){var t={uri:"https://api.twitch.tv/kraken/streams/",qs:{limit:"100",stream_type:"live",language:"en"},headers:{"Client-ID":y.client_id,Accept:"application/vnd.twitchtv.v5+json"},json:!0};return e&&(t.qs.cursor=e),t}},{key:"getTenStreams",value:function(){console.log("getting streamer");var e=this;return S(this.request).then(function(t){for(var n=new Set([]),a=10;a>0;){var s=Math.floor(99*Math.random());for(t._total<100&&(s=Math.floor(Math.random()*t._total));n.has(s);)s=Math.floor(99*Math.random());n.add(s),e.broadcastInfo.push(t.streams[s]),a--}return e.broadcastInfo}).catch(function(e){console.log("couldn't make request"),console.log(e)})}},{key:"getURL",value:function(e){return e.channel.url}},{key:"getImage",value:function(e){return e.preview.large}},{key:"getTenImages",value:function(e){var t=this;e.forEach(function(e){t.previewImages.push(t.getImage(e))})}},{key:"getTenURLS",value:function(e){var t=this;e.forEach(function(e){t.URLS.push(t.getURL(e))})}},{key:"chooseStream",value:function(e){var t={};return t.URL=this.URLS[e],t.previewImages=this.previewImages[e],t}},{key:"getTenImagesAndURLS",value:function(e){var t=this;e.forEach(function(e,n){t.imagesAndURLS[n+1]={URL:t.getURL(e),image:t.getImage(e)}})}}]),e}(),w=(n(425),function(e){function t(e){var n;return Object(o.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e)),console.log(e),n.createWedges=n.createWedges.bind(Object(g.a)(Object(g.a)(n))),n.startSpin=n.startSpin.bind(Object(g.a)(Object(g.a)(n))),n.getStreamers=n.getStreamers.bind(Object(g.a)(Object(g.a)(n))),n.state={spinning:"start",wedges:null,sources:{},degree:0,spinBy:0,result:"",rotations:360*n.props.rotations,displayResult:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"getStreamers",value:function(){var e=this,t=new k;return t.getTenStreams().then(function(n){console.log(n),t.getTenImagesAndURLS(n),e.setState({sources:t.imagesAndURLS,spinning:"start"})})}},{key:"createWedges",value:function(){console.log("creating wedges");var e,t=[],n=Object.keys(this.state.sources).length,a=360/n,i=0,r=Math.floor(Math.random()*n),o=function(){return a*r-a<0?0:-(a*r-a)};for(var c in console.log("".concat(r," selected")),console.log("".concat(o()," spinBy")),this.state.sources){var l={transform:"rotate(".concat(i,"deg)")};(c==r||0==r&&1==c)&&(console.log("".concat(c," key")),console.log(this.state.sources[c].URL),e=this.state.sources[c].URL),t.push(s.a.createElement("div",{key:c,style:l,className:"scaleDiv wedgePosition"},s.a.createElement("div",{className:"triangleTransform"},s.a.createElement("div",null,s.a.createElement("img",{className:"sourceImage",src:"".concat(this.state.sources["".concat(c)].image),alt:"preview"}))))),i+=a}return this.setState({spinning:"spinning",wedges:t,result:e,spinBy:o()+this.state.rotations}),this.props.passBackResult(this.state.result),Promise.resolve("Success")}},{key:"startSpin",value:function(){var e=this;this.setState({spinning:"stopped",displayResult:!1}),this.getStreamers().then(function(){e.createWedges().then(function(){setTimeout(function(){e.setState({displayResult:!0},console.log(e))},4950)})})}},{key:"render",value:function(){var e,t,n=this;"start"===this.state.spinning&&(e="positionCircleBlack",t=null),"spinning"===this.state.spinning&&(e="circleAttrubutesRed",t={animation:"spin 5s",transform:"translate(-50%, 0%) rotate(".concat(this.state.spinBy,"deg)")}),"stopped"===this.state.spinning&&(e="circleAttrubutesRed"),console.log(this.state.displayResult);var i=this.state.displayResult?this.props.displayResult():null,r={position:"relative"};return s.a.createElement(a.Fragment,null,s.a.createElement("div",{className:"min"},s.a.createElement("div",{className:"displayResult"},i),s.a.createElement("div",{style:r,className:"pointer"}),s.a.createElement("button",{style:r,className:"spinnerButton",onClick:function(){return n.startSpin()}},"Spin!"),s.a.createElement("div",{style:t,className:e},s.a.createElement("div",{className:"createCirlce"},s.a.createElement("div",{className:"cirlcePlacement"},this.state.wedges)))))}}]),t}(s.a.Component)),R=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={url:"",viewing:"",name:"",game:"",wedgesSource:{},result:""},n.getStreamerName=n.getStreamerName.bind(Object(g.a)(Object(g.a)(n))),n.resetState=n.resetState.bind(Object(g.a)(Object(g.a)(n))),n.displayStream=n.displayStream.bind(Object(g.a)(Object(g.a)(n))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"getStreamerName",value:function(){var e=this;(new f).getStreamerInfo().then(function(t,n){console.log(t.channel.url),e.setState({url:t.channel.url,name:t.channel.display_name,game:t.game,viewing:t.viewers},console.log("state set"))})}},{key:"resetState",value:function(){this.setState({url:"",wedgesSource:{}})}},{key:"displayStream",value:function(){return s.a.createElement(b.a,{url:"".concat(this.state.url)})}},{key:"spinResult",value:function(e){this.setState({url:e})}},{key:"render",value:function(){return s.a.createElement(m.a,null,s.a.createElement(a.Fragment,null,s.a.createElement(w,{displayResult:this.displayStream.bind(this),rotations:8,passBackResult:this.spinResult.bind(this)})))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[185,2,1]]]);
//# sourceMappingURL=main.b2e63bb4.chunk.js.map